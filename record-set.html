<!DOCTYPE html>
<link href='../polymer/polymer.html' rel='import'>
<polymer-element attributes='records' name='record-set'>
  <template></template>
  <script>
    (function() {
      var data;
    
      data = {};
    
      Polymer({
        records: [],
        ready: function() {
          return this._data = data;
        },
        save: function(type, record) {
          if (this._data[type] == null) {
            this._data[type] = {
              records: {},
              next: 1
            };
          }
          this._data[type].records[this._data[type].next] = record;
          this._data[type].next++;
          return this.records.push(record);
        }
      });
    
    }).call(this);
  </script>
</polymer-element>
<polymer-element attributes='rid' name='record-base'>
  <template>
    <record-set id='set'></record-set>
  </template>
  <script>
    (function() {
      Polymer({
        rid: void 0,
        created: function() {
          return this.type = this.tagName.toLowerCase();
        },
        ready: function() {
          if (this.rid != null) {
            return this.save();
          }
        },
        save: function() {
          console.log(this);
          return this.$.set.save(this.type, this);
        }
      });
    
    }).call(this);
  </script>
</polymer-element>
